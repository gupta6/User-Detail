(this.webpackJsonpuserdetail=this.webpackJsonpuserdetail||[]).push([[0],{37:function(e,t,n){e.exports={login:"Login_login__oq3Ev",form:"Login_form__1P_5A"}},38:function(e,t,n){e.exports={dash:"Dashboard_dash__1g7d2",modes:"Dashboard_modes__3K64r"}},41:function(e,t,n){e.exports={UserDetail:"UserDetail_UserDetail__37w0K",form:"UserDetail_form__3NDDl",cancel:"UserDetail_cancel__3D8b_"}},51:function(e,t,n){},55:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(18),s=n.n(r),l=(n(51),n(12)),i=n(20),o=n(7),u=(n(55),n(13)),j=n(37),d=n.n(j);function b(e,t){return e.test(t)}var m=function(e){return b(/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+.[a-z]+$/,e)},O="SAVE_USERS",h="SET_ERROR",p="VALIDATE_USER",x="LOGOUT_USER",f="UPDATE_EMAILS",v="UPDATE_USER",g=l.c,y=n(1),N=function(){var e=Object(l.b)(),t=g((function(e){return e.currentUser})),n=Object(a.useState)(""),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useRef)(null),o=Object(a.useRef)(null);return Object(y.jsx)("div",{className:d.a.login,children:Object(y.jsxs)("form",{className:d.a.form,onSubmit:function(n){var a,c;n.preventDefault();var r,l=null===(a=i.current)||void 0===a?void 0:a.value,u=null===(c=o.current)||void 0===c?void 0:c.value;""===l||""===u?s("All Fields are Required."):m(l)||(r=l,10===String(Number(r)).length&&+r[0]>5)?!function(e){return b(/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/,e)}(u)?s("Please Enter Strong Password"):(e(function(e){return{type:p,payload:{username:e}}}(l)),!t&&s("User Not Found")):s("Please Enter valid Email or Mobile")},children:[Object(y.jsx)("h2",{className:"text-secondary mb-3",children:"Login"}),r&&Object(y.jsx)("span",{className:"text-danger",children:r}),Object(y.jsxs)("div",{className:"form-group mb-4 mt-2",children:[Object(y.jsx)("label",{className:"form-label",htmlFor:"exampleInputEmail1",children:"Email or Phone"}),Object(y.jsx)("input",{type:"text",className:"form-control-lg my-2",id:"exampleInputEmail1",placeholder:"Enter email",name:"username",ref:i})]}),Object(y.jsxs)("div",{className:"form-group",children:[Object(y.jsx)("label",{className:"form-label",htmlFor:"exampleInputPassword1",children:"Password"}),Object(y.jsx)("input",{type:"password",className:"form-control-lg my-2",id:"exampleInputPassword1",placeholder:"Password",name:"password",ref:o})]}),Object(y.jsx)("button",{type:"submit",className:"btn btn-primary mt-4",children:"Submit"})]})})},E=n(16),S=n(38),_=n.n(S),w=n(68),U=n(67),C=n(69),k=function(){var e=g((function(e){return e.currentUser})),t=Object(l.b)();return Object(y.jsx)("div",{children:Object(y.jsx)(w.a,{bg:"primary",variant:"dark",expand:"md",children:Object(y.jsxs)(U.a,{children:[Object(y.jsx)(w.a.Brand,{children:"User Detail POC"}),Object(y.jsx)(w.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.jsx)(w.a.Collapse,{id:"basic-navbar-nav",children:Object(y.jsxs)(C.a,{className:"me-auto",children:[Object(y.jsx)(C.a.Link,{as:i.b,to:"/",children:"Home"}),Object(y.jsxs)(C.a.Link,{as:i.b,to:"",children:["Welcome ",e]}),Object(y.jsx)(C.a.Link,{as:i.b,to:"/",onClick:function(){t((localStorage.removeItem("user"),{type:x}))},children:"Logout"})]})})]})})})},D=function(){return Object(y.jsx)("header",{className:"bg-primary",children:Object(y.jsx)(k,{})})},A=function(e){return Object(y.jsxs)("div",{className:"card h-100",onClick:function(){return e.redirect(e.user)},children:[Object(y.jsx)("div",{className:"card-header",children:e.user.name}),Object(y.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(y.jsx)("li",{className:"list-group-item",children:e.user.username}),Object(y.jsx)("li",{className:"list-group-item",children:e.user.phone}),Object(y.jsx)("li",{className:"list-group-item",children:e.user.email})]})]})},P=function(e){return Object(y.jsx)("div",{className:"table-responsive",children:Object(y.jsxs)("table",{className:"table table-success table-striped",children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",children:"Name"}),Object(y.jsx)("th",{scope:"col",children:"Phone"}),Object(y.jsx)("th",{scope:"col",children:"Username"}),Object(y.jsx)("th",{scope:"col",children:"Email"}),Object(y.jsx)("th",{scope:"col",children:"Action"})]})}),Object(y.jsx)("tbody",{children:e.users.map((function(t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{onClick:function(){return e.redirect(t)},children:t.name}),Object(y.jsx)("td",{children:t.phone}),Object(y.jsx)("td",{children:t.username}),Object(y.jsxs)("td",{children:[t.editable?Object(y.jsx)("input",{type:"text",value:t.email,onChange:function(n){return e.changed(n,t)}}):Object(y.jsx)("span",{children:t.email})," "]}),Object(y.jsxs)("td",{children:[Object(y.jsx)("i",{role:"button",onClick:function(){return e.enableEdit(t)},className:"las la-edit text-secondary"}),Object(y.jsx)("i",{role:"button",onClick:function(){return e.delEmail(t)},className:"las la-trash-alt text-danger"})]})]},t.id)}))})]})})},L=function(e){return Object(y.jsx)("div",{className:"input-group mb-3",children:Object(y.jsx)("input",{type:"text",className:"form-control","aria-label":"Sizing example input",placeholder:"Search Here",onChange:e.search})})},F=function(){var e=g((function(e){return e.users})),t=Object(l.b)(),n=Object(o.h)();console.log(e);var c=Object(a.useState)([]),r=Object(u.a)(c,2),s=r[0],i=r[1],j=Object(a.useState)("List"),d=Object(u.a)(j,2),b=d[0],m=d[1],O=Object(a.useState)("sortBy"),h=Object(u.a)(O,2),p=h[0],x=h[1],v=Object(a.useState)([]),N=Object(u.a)(v,2),S=N[0],w=N[1],U=Object(a.useState)(!0),C=Object(u.a)(U,2),k=C[0],F=C[1];function I(e){var t=e.target;t.innerHTML!==b&&m(t.innerText)}Object(a.useEffect)((function(){s.length<e.length&&k&&i(e)}),[e,s.length,k]),console.log(S);var R=Object(a.useCallback)((function(e,t){var n=Object(E.a)(s);n.forEach((function(n){n.id===t.id&&(n.email=e.target.value)})),i(n);var a=Object(E.a)(S),c=S.findIndex((function(e){return e.id===t.id})),r={email:e.target.value,id:t.id,editable:!0};c>-1?a[c]=r:a.push(r),w(a)}),[s,S]);function T(e){n.push({pathname:"/user-edit",state:e})}var B=Object(a.useCallback)((function(e){t(function(e){return{type:f,payload:{updatedEmails:e}}}(e))}),[t]);Object(a.useEffect)((function(){var e=setTimeout((function(){B(S)}),1e3);return function(){clearTimeout(e)}}),[S,B]);var z=s;return Object(y.jsxs)("div",{className:_.a.dash,children:[Object(y.jsx)(D,{}),Object(y.jsxs)("div",{className:"container justify-content-center",children:[Object(y.jsxs)("div",{className:"d-flex justify-content-between col-12 mt-4",children:[Object(y.jsxs)("div",{className:"col-sm-4 col-md-3 text-start",children:["View Mode:",Object(y.jsxs)("span",{className:_.a.modes,children:[Object(y.jsx)("span",{role:"button",onClick:I,children:"\xa0Tiles"})," ","|"," ",Object(y.jsx)("span",{role:"button",onClick:I,children:"List"})]})]}),Object(y.jsxs)("div",{className:"d-flex col-8 col-sm-7 col-md-6 col-xl-5 justify-content-between",children:[Object(y.jsx)("div",{className:"col-7",children:Object(y.jsx)(L,{search:function(e){var t=null===e||void 0===e?void 0:e.target.value,n=s.filter((function(e){var n;for(n in e)if("company"!==e[n]&&"address"!==e[n]&&String(e[n]).toLowerCase().includes(t.toLowerCase()))return!0;return!1}));F(!t),i(n),x("sortBy")}})}),Object(y.jsx)("div",{className:"col-4",children:Object(y.jsxs)("select",{className:"form-select","aria-label":"Default select example",value:p,onChange:function(t){var n=t.target;if(n.value!==p){var a=Object(E.a)(s);"name"===n.value?(x("name"),a.sort((function(e,t){return function(e,t){return e>t?1:t>e?-1:0}(e.name,t.name)}))):"sortBy"===n.value&&(x("sortBy"),a=Object(E.a)(e)),i(a)}},children:[Object(y.jsx)("option",{value:"sortBy",children:"Sort By"}),Object(y.jsx)("option",{value:"name",children:"Name"}),Object(y.jsx)("option",{value:"dob",children:"DOB"})]})})]})]}),Object(y.jsx)("div",{className:"row justify-content-center my-3",children:"List"===b?Object(y.jsx)(P,{users:z,delEmail:function(e){var t=Object(E.a)(s);t.forEach((function(t){t.id===e.id&&(t.email="",t.editable=!1)})),i(t);var n=Object(E.a)(S),a=S.findIndex((function(t){return t.id===e.id})),c={email:"",id:e.id};a>-1?n[a]=c:n.push(c),w(n)},enableEdit:function(e){var t=Object(E.a)(s);t.forEach((function(t){t.id===e.id&&(t.editable=!0)})),i(t)},changed:R,redirect:T}):z.map((function(e){return Object(y.jsx)("div",{className:"col-md-4 col-xs-12 mt-4",children:Object(y.jsx)(A,{user:e,redirect:T})},e.id)}))})]})]})},I=function(){return Object(y.jsx)("footer",{className:"d-flex bg-primary text-light justify-content-center align-items-center",style:{height:"50px"},children:"Portal Devloped by Kunal"})},R=n(31),T=n(9),B=n(41),z=n.n(B),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Value has not been saved, Are you sure you want to leave the page?",t=Object(a.useState)(!1),n=Object(u.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){return c&&(window.onbeforeunload=function(){return e}),function(){window.onbeforeunload=null}}),[c,e]);var s=Object(y.jsx)(o.a,{when:c,message:e});return{prompt:s,setDirty:function(){return r(!0)},setPristine:function(){return r(!1)}}},V=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(o.i)(),s=Object(l.b)(),i=Object(a.useState)(Object(T.a)({},r.state)),j=Object(u.a)(i,2),d=j[0],b=j[1],O=Object(a.useState)(""),h=Object(u.a)(O,2),p=h[0],x=h[1],f=M(),g=f.prompt,N=f.setDirty,E=f.setPristine;function S(e){b(Object(T.a)(Object(T.a)({},d),{},Object(R.a)({},e.target.id,e.target.value))),N()}return Object(y.jsxs)(y.Fragment,{children:[" ",r.state?Object(y.jsxs)("div",{className:z.a.UserDetail,children:[g,Object(y.jsx)(D,{}),Object(y.jsx)("div",{className:"container d-flex justify-content-center",children:Object(y.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},className:"col-12 col-sm-10 col-md-8 col-lg-6 border p-3 my-5 text-start",children:[Object(y.jsx)("h2",{className:"text-secondary text-center",children:"User Edit Form"}),p&&Object(y.jsx)("span",{className:"text-danger",children:p}),Object(y.jsxs)("div",{className:"mb-3 text-start",children:[Object(y.jsx)("label",{htmlFor:"name",className:"form-label",children:"Name"}),Object(y.jsx)("input",{type:"text",disabled:!n,className:"form-control",id:"name",value:d.name,onChange:S})]}),Object(y.jsxs)("div",{className:"mb-3",children:[Object(y.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(y.jsx)("input",{type:"email",disabled:!n,className:"form-control",id:"email",value:d.email,onChange:S})]}),Object(y.jsxs)("div",{className:"mb-3",children:[Object(y.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username"}),Object(y.jsx)("input",{type:"text",disabled:!n,className:"form-control",id:"username",value:d.username,onChange:S})]}),Object(y.jsxs)("div",{className:"mb-3",children:[Object(y.jsx)("label",{htmlFor:"phone",className:"form-label",children:"Mobile"}),Object(y.jsx)("input",{type:"text",disabled:!n,className:"form-control",id:"phone",value:d.phone,onChange:S})]}),Object(y.jsx)("div",{className:"d-flex justify-content-center",children:n?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{type:"submit",className:"btn btn-success",onClick:function(){console.log(m(d.email)),""===d.name||""===d.email||""===d.phone||""===d.username?x("All Fields Are Required."):m(d.email)?(x(""),s({type:v,payload:{updatedUser:d}}),c(!1),E()):x("Please Enter Valid Email.")},children:"Save"})," ",Object(y.jsx)("button",{type:"submit",className:[z.a.cancel,"btn btn-danger"].join(" "),onClick:function(){E(),c(!1)},children:"Cancel"})]}):Object(y.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){c(!0)},children:"Edit"})})]})})]}):Object(y.jsx)(o.b,{to:"/"})]})};var Z,q=function(){var e=Object(l.b)(),t=g((function(e){return e.currentUser}));return Object(a.useEffect)((function(){e({type:"GET_USERS"})}),[e]),Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(i.a,{children:t?Object(y.jsxs)(o.e,{children:[Object(y.jsx)(o.c,{path:"/user-edit",component:V}),Object(y.jsx)(o.c,{path:"/",component:F})]}):Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(o.c,{path:"/",component:N})})}),Object(y.jsx)(I,{})]})},G=(n(62),n(26)),H=n(46),K=["id"],J={users:[],currentUser:null!==(Z=localStorage.getItem("user"))&&void 0!==Z?Z:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(T.a)(Object(T.a)({},e),{},{users:t.payload.users});case h:return Object(T.a)(Object(T.a)({},e),{},{error:t.payload.error});case p:var n=e.users.find((function(e){return e.email===t.payload.username||e.phone===t.payload.username}));return n&&localStorage.setItem("user",n.username),Object(T.a)(Object(T.a)({},e),{},{currentUser:n?n.username:""});case x:return Object(T.a)(Object(T.a)({},e),{},{currentUser:""});case f:if(0!==t.payload.updatedEmails.length){var a=Object.values([].concat(Object(E.a)(e.users),Object(E.a)(t.payload.updatedEmails)).reduce((function(e,t){var n=t.id,a=Object(H.a)(t,K);return e[n]=Object(T.a)(Object(T.a)({},e[n]||{}),{},{id:n},a),e}),{}));return Object(T.a)(Object(T.a)({},e),{},{users:a})}return e;case v:return Object(T.a)(Object(T.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.updatedUser.id?Object(T.a)({},t.payload.updatedUser):e}))});default:return e}},$=n(45),Q=n(22),X=n.n(Q),Y=n(27),ee=n(44),te=function(){var e=Object(ee.a)(X.a.mark((function e(t){var n;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.abrupt("return",n.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ne=X.a.mark(ce),ae=X.a.mark(re);function ce(){var e;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Y.a)((function(){return te("https://jsonplaceholder.typicode.com/users")}));case 3:return(e=t.sent).forEach((function(e){return e.editable=!1})),console.log(e),t.next=8,Object(Y.b)({type:O,payload:{users:e}});case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(0),console.log(t.t0),t.next=15,Object(Y.b)((n=t.t0,{type:h,payload:{error:n}}));case 15:case"end":return t.stop()}var n}),ne,null,[[0,10]])}function re(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.c)("GET_USERS",ce);case 2:case"end":return e.stop()}}),ae)}var se=Object($.a)(),le=Object(G.c)(W,Object(G.a)(se));se.run(re);var ie=le;s.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(l.a,{store:ie,children:Object(y.jsx)(q,{})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.d456823d.chunk.js.map